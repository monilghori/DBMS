CREATE TABLE GAME(
 GID VARCHAR(5) PRIMARY KEY ,
 GNAME VARCHAR(20) NOT NULL, 
 YEAR NUMERIC(4) NOT NULL, 
 RATING NUMERIC(4,2),
 LEVEL NUMERIC(5),
 PRICE NUMERIC(10,3)
 );
CREATE TABLE PUZZLE(
 G1_ID VARCHAR(5) PRIMARY KEY,
 IQ NUMERIC(3) ,
 MIN_TIME NUMERIC(5),
 GID VARCHAR(5) REFERENCES GAME(GID) 
);

CREATE TABLE ACTION(
 G2_ID VARCHAR(5) PRIMARY KEY,
 TOTAL_KILLS NUMERIC(3) ,
 BATTLE_PASS VARCHAR(3),
 GID VARCHAR(5) REFERENCES GAME(GID) 
);

CREATE TABLE RACING(
 G3_ID VARCHAR(5) PRIMARY KEY,
 CARS NUMERIC(3) ,
 MAX_SCORE NUMERIC(3),
 GID VARCHAR(5) REFERENCES GAME(GID) 
);

CREATE TABLE REGION(
 RID VARCHAR(10) PRIMARY KEY, 
 CITY VARCHAR(20) NOT NULL,
 COUNTRY VARCHAR(20) NOT NULL
);


CREATE OR REPLACE FUNCTION get_age( birthday date )
RETURNS interval
AS $CODE$
BEGIN
    RETURN age(birthday);
END
$CODE$
LANGUAGE plpgsql IMMUTABLE;

CREATE TABLE USERS(
UID VARCHAR(5) PRIMARY KEY,
FIRST_NAME VARCHAR(20) NOT NULL,
LAST_NAME VARCHAR(20) NOT NULL,
DATE_OF_BIRTH DATE NOT NULL ,
RID VARCHAR(10) REFERENCES REGION(RID),
age  interval GENERATED ALWAYS AS (get_age(DATE_OF_BIRTH))STORED);

CREATE TABLE PLAY(
 GID VARCHAR(5) REFERENCES GAME(GID) ,
 UID VARCHAR(5) REFERENCES USERS(UID)
);

CREATE TABLE OWNERS(
OID VARCHAR(10) PRIMARY KEY,
ONAME VARCHAR(20) NOT NULL,
COUNTRY VARCHAR(20) NOT NULL,
EMAIL VARCHAR(30) UNIQUE
);


CREATE TABLE CREATES(
OID VARCHAR(5) REFERENCES OWNERS(OID),
GID VARCHAR(5) REFERENCES GAME(GID)
);

CREATE TABLE OTHERS(
PID VARCHAR(5) PRIMARY KEY,
UID VARCHAR(5) REFERENCES USERS(UID),
OCCUPATION VARCHAR(10) NOT NULL
);

CREATE TABLE STUDENT(
SID VARCHAR(5) PRIMARY KEY,
UID VARCHAR(5) REFERENCES USERS(UID),
COLLEGE_NAME VARCHAR(30) NOT NULL
);

INSERT INTO GAME(GID,GNAME,YEAR,RATING,LEVEL,PRICE) VALUES ('G01','GRAND THEFT AUTO 5',2013,9,69,1455);

INSERT INTO GAME(GID,GNAME,YEAR,RATING,LEVEL,PRICE) VALUES ('G02','VALORANT',2020,9,9,1600);

INSERT INTO GAME(GID,GNAME,YEAR,RATING,LEVEL,PRICE) VALUES ('G03','CANDY CRUSH',2012,7.6,10000,0);

INSERT INTO GAME(GID,GNAME,YEAR,RATING,LEVEL,PRICE) VALUES ('G04','ASPHALT 9',2018,8.8,70,999);

INSERT INTO GAME(GID,GNAME,YEAR,RATING,LEVEL,PRICE) VALUES ('G05', 'GETTING OVER IT',2017,7.6,10,1199);

INSERT INTO GAME(GID,GNAME,YEAR,RATING,LEVEL,PRICE) VALUES ('G06', 'NEED FOR SPEED',2014,9.2,300,799);

INSERT INTO GAME(GID,GNAME,YEAR,RATING,LEVEL,PRICE) VALUES ('G07', 'PUBG',2014,9.8,9,199);

INSERT INTO GAME(GID,GNAME,YEAR,RATING,LEVEL,PRICE) VALUES ('G08', 'CLASH OF CLANS',2012,8.9,15,399);

INSERT INTO GAME(GID,GNAME,YEAR,RATING,LEVEL,PRICE) VALUES ('G09', '2048',2014,7.9,1,99);

INSERT INTO GAME(GID,GNAME,YEAR,RATING,LEVEL,PRICE) VALUES ('G10','FORZA ',2010,7,199,600);

INSERT INTO ACTION(G2_ID,TOTAL_KILLS,BATTLE_PASS,GID) VALUES ('G201',25,'S10','G01');
INSERT INTO ACTION(G2_ID,TOTAL_KILLS,BATTLE_PASS,GID) VALUES ('G202',27,'S12','G02');
INSERT INTO ACTION(G2_ID,TOTAL_KILLS,BATTLE_PASS,GID) VALUES ('G203',12,'S06','G07');
INSERT INTO ACTION(G2_ID,TOTAL_KILLS,BATTLE_PASS,GID) VALUES ('G204',100,'S25','G08');

INSERT INTO PUZZLE(G1_ID,IQ, MIN_TIME,GID) VALUES ('G101',099,120,'G03'); 
INSERT INTO PUZZLE(G1_ID,IQ, MIN_TIME,GID) VALUES ('G102',220,360,'G05'); 
INSERT INTO PUZZLE(G1_ID,IQ, MIN_TIME,GID) VALUES ('G103',200,60,'G09'); 


INSERT INTO RACING(G3_ID,CARS,MAX_SCORE,GID) VALUES ('G301',57,790,'G04');
INSERT INTO RACING(G3_ID,CARS,MAX_SCORE,GID) VALUES ('G302',25,911,'G06');
INSERT INTO RACING(G3_ID,CARS,MAX_SCORE,GID) VALUES ('G303',70,599,'G10');


INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1101','Surat','India');
INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1102','Dubai','UAE');
INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1103','Cario','Egypt');
INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1104','London','UK');
INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1105','Delhi','India');
INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1106','Doha','Qatar');
INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1107','Perth','Australia');
INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1108','New York City','USA');
INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1109','	Paris','France');
INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1110','New York City','USA');
INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1111','Tokyo','Japan');
INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1112','Chennai','India');
INSERT INTO REGION(RID,COUNTRY,CITY)  Values ('R1113','	Jaipur','India');

INSERT INTO USERS VALUES 
('U01','MONIL','GHORI','18-NOV-2003','R1101'),
('U02','KEVIN','SANGANI','20-SEP-2003','R1101'),
('U03','Amir','Acharya','22-AUG-2004','R1102'),
('U04','Rohan','Agarwal','15-FEB-2001','R1103'),
('U05','Kabir','Khatri','06-JAN-2000','R1104'),
('U06','Ishaan','Ahuja','01-JUNE-1998','R1105'),
('U07','Avyaan','Anand','13-MAY-1999','R1106'),
('U08','Deepak','Laghari','07-SEP-1995','R1107'),
('U09','Manish','Patel','29-OCT-1994','R1108'),
('U010','Rahul','Reddy','19-SEP-2006','R1109'),
('U011','Ravindra','Bakshi','24-DEC-2008','R1110'),
('U012','Surendra','Bhatt','27-MAY-1997','R1111'),
('U013','Vraj','Clerk','03-MAY-2003','R1112'),
('U014','Chandra','Chowdhury','09-FEB-2002','R1113'),
('U015','Kamal','Chabra','11-OCT-1999','R1103'),
('U016','Suraj','Chawla','20-JULY-1995','R1106'),
('U017','Bhaskar','Malhotra','15-NOV-1996','R1107'),
('U018','Dilip','Gandhi','21-MAY-1994','R1102'),
('U019','Harish','Kaur','30-DEC-2005','R1105'),
('U020','Shankar','Joshi','26-JULY-2000','R1110');

INSERT INTO STUDENT VALUES
('S01','U01','DDU'),
('S02','U02','DDU'),
('S03','U03','SCET'),
('S04','U04','CHARUSAT'),
('S05','U010','DAICT'),
('S06','U011','BHULKA_VIHAR'),
('S07','U013','DDU'),
('S08','U014','SCET'),
('S09','U019','NIRMA'),
('S10','U020','PDPU');

INSERT INTO OTHERS VALUES
('P01','U05','ENGINEER'),
('P02','U06','TEACHER'),
('P03','U07','GAMER'),
('P04','U08','DOCTOR'),
('P05','U09','DEVELOPER'),
('P06','U012','ACTOR'),
('P07','U015','PILOT'),
('P08','U016','GAMER'),
('P09','U017','SINGER'),
('P10','U018','LAWYER');


INSERT INTO OWNERS(OID,ONAME,COUNTRY,EMAIL) VALUES ('O101','Rockstar Games','New York','Support@rockstargames.com');

INSERT INTO OWNERS(OID,ONAME,COUNTRY,EMAIL) VALUES ('O102','EA Games','Hawkins','help@eagames.com');
 
INSERT INTO OWNERS(OID,ONAME,COUNTRY,EMAIL) VALUES ('O103','King Games','Sweaden','help@kingconnect.com');

INSERT INTO OWNERS(OID,ONAME,COUNTRY,EMAIL) VALUES ('O104','Supercell','Finland','parents@supercell.com');

INSERT INTO OWNERS(OID,ONAME,COUNTRY,EMAIL) VALUES ('O105','Riot Games','California','jdoe@riotgames.com');

INSERT INTO OWNERS(OID,ONAME,COUNTRY,EMAIL) VALUES ('O106','Gameloft','France','support@gameloft.com');

INSERT INTO OWNERS(OID,ONAME,COUNTRY,EMAIL) VALUES ('O107','Blackout Lab','Barcelona','info@blackoutlabs.com');

INSERT INTO OWNERS(OID,ONAME,COUNTRY,EMAIL) VALUES ('O108','Unity','Australia','support@getoverit.com');

INSERT INTO OWNERS(OID,ONAME,COUNTRY,EMAIL) VALUES ('O109','Playground Games', 'Mexico', 'forza@microsoft.com');

INSERT INTO OWNERS(OID,ONAME,COUNTRY,EMAIL) VALUES ('O110','Krafton','Korea','pubg@tencentgames.com');

INSERT INTO CREATES VALUES 
('O101','G01'),
('O105','G02'),
('O103','G03'),
('O102','G04'),
('O109','G05'),
('O106','G06'),
('O110','G07'),
('O104','G08'),
('O109','G09'),
('O107','G10');

INSERT INTO PLAY VALUES
('G01','U01'),
('G02','U01'),
('G02','U02'),
('G09','U013'),
('G08','U013'),
('G03','U03'),
('G04','U04'),
('G05','U05'),
('G06','U06'),
('G07','U07'),
('G10','U08'),
('G03','U09'),
('G07','U010'),
('G08','U011'),
('G01','U012'),
('G09','U014'),
('G10','U015'),
('G02','U016'),
('G05','U017'),
('G06','U018'),
('G04','U019'),
('G06','U020');











